/**
 * Created by Administrator on 2015/10/16.
 */
$(document).ready(function(){

    /*??????*/

    $(".line").on("click",function(){

         $(this).toggleClass("toggle").siblings(".nav1").toggle();
    })
    $(".user").on("click",function(){
        $(".user-btn").toggleClass("move");
    })
    var slide = $(".slide");  // ????????????
    var discLi = $(".disc li");
    var slideLi = $(".slide li");
    var W = $(window).width();  // ??????????
    //??¡?????
    slide.append(slideLi.eq(0).clone(true));
    /* discLi.on({
         "mouseenter":function(){ alert(11);},
         "click":function(){alert(22);}
     })
     ?¼????   ????¼?*/
    $(".slide li").width(W);  // ?????????? ??????  li
    var key = 0; // ????????
    var circle = 0; //?????
    discLi.on("click",function(){
        /*alert($(this).index());*/
       /* ?????n???? ??slide?????n???*/
       circle =  key = $(this).index();// ?????????? key
        run();
        disc();
    })

    /*???????*/
    function run(){
        slide.stop().animate({"left":-key * W},500);
    }

    /*??????*/
    function disc(){
        discLi.eq(circle).addClass("current").siblings().removeClass();
    }

    /*???????*/
    var timer = 0;

    timer = setInterval(autoplay,3000);

    //??????????
    function autoplay(){
        //?????
        key++;
        if(key > slideLi.length)
        {
            slide.css("left",0);  //css ???????????
            key = 1; // ?????????
        }
        run();
        //???????
        circle++;
        circle > discLi.length-1 ? circle = 0 : circle;
        disc();
    }

    //???????
    $(".banner").hover(function(){
        clearInterval(timer);
        timer = null;
    },function(){
        clearInterval(timer); // ??? ???????? ?????????? ??????????
        timer = setInterval(autoplay,3000);
    })

    //???????
    $(window).resize(function(){
        W = $(window).width();
        $(".slide li").width(W);
    })
















})
